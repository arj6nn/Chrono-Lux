<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link rel="stylesheet" href="/styles/user/header.css">

<nav>
    <div class="nav-container nav-wrapper">

        <!-- LOGO -->
        <a href="/home"><div class="logo">Chrono <span style="color: #D4AF37;">Luxe</span></div></a>

        <!-- LINKS -->
        <ul class="nav-links">
            <li><a href="/home">Home</a></li>
            <li><a href="/shop">Shop</a></li>
            <li><a href="#">Contact</a></li>
            <li><a href="#">About Us</a></li>
        </ul>

        <!-- NAV ICONS + USER -->
        <div class="nav-icons">

            <i class="fa-solid fa-magnifying-glass"></i>
            <i class="fa-regular fa-heart"></i>
            <i class="fa-solid fa-bag-shopping"></i>

            <% if (!user) { %>
                <a href="/signup" class="nav-signup-btn">Sign Up</a>
                <a href="/login" class="nav-login-btn">Login</a>

            <% } else { %>
                <div style="display: flex; align-items: center; gap: 15px;">

                    <% const firstLetter = user.name ? user.name.charAt(0).toUpperCase() : "U"; %>

                    <div class="user-avatar" style="
                        width:32px;
                        height:32px;
                        border-radius:50%;
                        background:#2E4235;
                        border:2px solid #2E4235;
                        display:flex;
                        justify-content:center;
                        align-items:center;
                        color:white;
                        font-weight:600;
                        font-size:14px;">
                        <%= firstLetter %>
                    </div>

                    <a href="#" onclick="confirmLogout()" style="
                        padding: 6px 12px;
                        border-radius: 5px;
                        background: #e74c3c;
                        color: white;
                        text-decoration: none;
                        font-size: 14px;
                        font-weight: 500;">
                        Logout
                    </a>
                </div>
            <% } %>

        </div>
    </div>
</nav>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<script>
function confirmLogout() {
    Swal.fire({
        title: "Are you sure?",
        text: "Do you want to logout?",
        icon: "warning",
        showCancelButton: true,
        confirmButtonColor: "#e74c3c",
        cancelButtonColor: "#3085d6",
        customClass: {
            popup: 'glass-popup'
        }
    }).then((result) => {
        if (result.isConfirmed) {
            window.location.href = "/logout";
        }
    });
}
</script>

<script>
/* Fade IN when page is ready */
window.addEventListener("DOMContentLoaded", () => {
  document.body.classList.add("page-ready");
});

/* Fade OUT only when clicking a product */
document.addEventListener("DOMContentLoaded", () => {
  document.querySelectorAll(".product-card").forEach(card => {
    card.addEventListener("click", () => {
      document.body.classList.remove("page-ready");
      document.body.classList.add("fade-out");
    });
  });
});

/* Safety: remove fade on back navigation */
window.addEventListener("pageshow", () => {
  document.body.classList.add("page-ready");
  document.body.classList.remove("fade-out");
});
</script>
